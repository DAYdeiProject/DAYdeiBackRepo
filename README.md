# DAYdeiBackRepo
## DAYDEI 배포 링크

🗓️[지금 바로 daydei사이트 방문하기](https://www.daydei.life/)
<p>
  <img src="https://user-images.githubusercontent.com/51226340/232444605-f65642c7-5bfe-4457-8f97-2956fd17edb1.png">
</p>

## 깃허브 레포

> FE :
[DAYdei FE 깃허브 바로가기](https://github.com/DAYdeiProject/DAYdei_FE.git)
> 

> BE :
[DAYdei BE 깃허브 바로가기](https://github.com/DAYdeiProject/DAYdeiBackRepo)


### 팀원

| 이름   | 포지션 | 팀원구분        |             Github              |
| ------ | :----: | --------------- | :-----------------------------: |
| 김주희 |   BE   | 백엔드 팀장 |    https://github.com/Jjuhui313     |
| 최정환 |   BE   | 백엔드 팀원 | https://github.com/the1224 |
| 한지윤 |   BE   | 백엔드 팀원 | https://github.com/trueyoon |

## 기술스택

<div> 
  <img src="https://img.shields.io/badge/JAVA-007396?style=for-the-badge&logo=java&logoColor=white">
  <img src="https://img.shields.io/badge/Spring-6DB33F?style=for-the-badge&logo=Spring&logoColor=white">
  <img src="https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=mysql&logoColor=white">
  <img src="https://img.shields.io/badge/jquery-0769AD?style=for-the-badge&logo=jquery&logoColor=white">
  <img src="https://img.shields.io/badge/NGINX-009639?style=for-the-badge&logo=css3&logoColor=white">
  <img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white">
  <img src="https://img.shields.io/badge/aws-232F3E?style=for-the-badge&logo=aws&logoColor=white">
</div>

## 프로젝트 기능

### 😊 회원가입  / 카카오 로그인

> 개인 캘린더 기능 구현을 위해 회원가입과 로그인을 구현하였습니다.
OAuth2를 이용하여 회원가입 없이 카카오 로그인이 가능합니다.!
<p>
  <img src="https://user-images.githubusercontent.com/51226340/232443353-a2a4f160-cf86-4e13-81eb-c5d7cabb77c2.png">
</p>


### ❤️ 친구 신청 / 카카오 친구 연동

> 친구 관계를 설정하고 싶은 사용자에게 친구 신청을 보낼 수 있습니다.
카카오 로그인 접속자의 경우, 친구 탭에서 카카오 친구 연동을 통해
DAYDEI 서비스를 이용 중인 카카오 친구에게 일괄 친구 신청을 보낼 수 있습니다.
이용자 프로필에서 나와 함께 아는 친구가 몇 명인지 확인 할 수 있습니다.
<p>
  <img src="https://user-images.githubusercontent.com/51226340/232443767-eb0ee736-f50f-4340-94b4-53b4c319400c.png">
  <img src="https://user-images.githubusercontent.com/51226340/232443936-6ba0b607-58d8-4727-ab4f-3aaacd24456e.png">
</p>

### ✏️ 일정 CRUD

> 캘린더에서 희망 날짜에 일정을 등록할 수 있습니다.
일정에 친구를 초대할 수 있고, 초대받은 친구가 일정을 수락하면 친구의 캘린더에도 일정이 등록됩니다.
일정에 사진을 최대 3장 첨부할 수 있습니다.
일정의 공개 범위를 선택할 수 있습니다.
‘전체공개(스크랩가능)’을 선택할 경우, 나를 구독한 이용자의 캘린더에 해당 일정을 표시할 수 있습니다.
> 

<div>
  <img src="https://user-images.githubusercontent.com/51226340/232829170-0e6b9081-b286-4a91-9a37-cd8e36fbe2b8.jpg", width="330">
  <img src="https://user-images.githubusercontent.com/51226340/232829504-333eae69-e2ba-4750-83f0-12d8467314c9.jpg", width="330">
  <img src="https://user-images.githubusercontent.com/51226340/232831101-6f37ad98-89ee-494c-812c-daf85f50f947.jpg", width="330">
</div>

### 🌟 구독하기

> 원하는 이용자를 구독할 수 있습니다.
구독한 이용자가 ‘전체공개(스크랩가능)’ 범위로 등록한 일정을 모두 내 캘린더에 표시할 수 있습니다.
직접 작성한 일정이 아닌, 구독을 통해 내 캘린더에 표시된 일정은 모두 회색으로 표시됩니다.
구독 계정 별로 표시/숨김 설정을 통해 원하는 구독 계정의 일정만 표시할 수 있습니다.
> 
<div>
  <img src="https://user-images.githubusercontent.com/51226340/232831456-9ea82050-0cb8-4d4b-91d0-3a2a986b0227.jpg">
</div>
<div>
  <img src="https://user-images.githubusercontent.com/51226340/232831489-a9b7704f-0c4f-4a31-86cb-ce1746b99893.jpg", width="200">
  <img src="https://user-images.githubusercontent.com/51226340/232831502-56aedd8b-f213-4304-ae3d-05d78340e12e.jpg", width="800">
</div>

### 🔔 실시간 알림

> 친구 신청, 친구 승인, 구독, 일정 초대, 임박한 일정 등 각종 알림을 실시간으로 받아볼 수 있습니다.
> 
<div>
  <img src="https://user-images.githubusercontent.com/51226340/232833217-e1ba90bc-995c-4de3-a313-27d630f08331.jpg", width="500">
  <img src="https://user-images.githubusercontent.com/51226340/232833246-6f45bc45-9b5e-4918-849c-d31ce3e3789a.jpg", width="330">
</div>

### 🔍 회원 검색

> 찾아보기 탭에서 카테고리별로 이용자들 목록을 살펴볼 수 있습니다.
원하는 이용자를 친구 신청하거나 구독할 수 있습니다.
프로필을 눌러 캘린더를 구경할 수 있습니다.
> 

<div>
  <img src="https://user-images.githubusercontent.com/51226340/232833946-89346709-5d67-49f0-b073-2ce014cdeb49.jpg">
</div>

## BE 적용 기술

### ◻ Swagger

> 프론트엔드와 정확하고 원활한 소통을 위해 스웨거를 도입하여 적용했습니다.
> 

### ◻ Spring Security

> 사용자 인증, 인가 기능 구현을 위해 Spring Security를 사용했습니다.
> 

### ◻ ec2 연결

> AWS ec2 서버를 열어 서비스를 배포했습니다.
> 

### ◻ rds db 연결

> 공통적으로 db를 사용 할 수 있게 활용했습니다
> 

### ◻ CI/CD

> 빌드와 배포를 효율적으로 하기 위해 CI/CD를 구축했습니다
> 

### ◻ SSE

> 실시간 알림을 위해 SSE를 구현했습니다
> 

### ◻ Query DSL

> 효율적인 DB 접근을 위해 Query DSL을 적용했습니다
> 

### ◻ AOP

> 유저 이벤트를 목적으로 접속률을 계산하기 위해 AOP를 도입했습니다
> 

### ◻ Sentry

> log 확인의 접근성을 높이기 위해 Sentry를 적용했습니다
> 

### ◻ SSL, Nginx

> 사이트의 보안을 위해 SSL과 Nginx로 https를 적용하였습니다.
> 

### ◻ OAuth2

> 서비스 접근성을 높이기 위해 간편한 소셜로그인을 구현했습니다
> 

### ◻ S3

> 이미지 데이터를 관리하기 위해 S3를 사용했습니다
> 

## ⚙ Development Environment

`Java 17` `SpringBoot 2.7.9` `Ubuntu 20.04.5 LTS`

## 🚨 Trouble Shooting BE

- 1
    - 문제 : 
    SSL 인증서를 생성하는 과정에서 `- the following errors were reported by the server:` 에러 발생
    - 시도 : 
    nginx와 certbot 완전 삭제 후 다시 진행하였으나 같은 오류 발생
    - 해결 : 
    인스턴스 재생성 후 설정되어 있는 PortForwarding 모두 삭제 후 다시 진행하여 정상적으로 인증서 생성
- 2
    - 문제 : 
    SSL 적용 후 클라이언트 console에 다음과 같은 에러 발생
    **`net::ERR_INCOMPLETE_CHUNKED_ENCODING`**
    - 시도 : 
    검색 결과,
    nginx 사용 시, HTTP 프로토콜 버전 1.0으로 자동 설정되며
    1.0 버전에서는 SSE 연결 유지가 불가능하기 때문에
    해당 오류가 발생하는 것으로 확인
    - 해결 : 
    nginx conf파일에
    HTTP를 1.1로 설정해주기 위해 server블록에 다음을 추가해주어야 했다.
    `proxy_set_header Connection '';`
    `proxy_http_version 1.1;`
    또한 연결 시간이 기본 1분으로 설정되기 때문에 연결 시간을 늘리고자 다음 설정도 추가해주었더니 해당 에러는 더 이상 뜨지 않았다.
    `proxy_read_timeout 3600s`
    `proxy_send_timeout 3600s`

## 🌐 Architecture

<div>
  <img src="https://user-images.githubusercontent.com/51226340/232834573-221c4144-93a0-4c6c-a4e2-8320388a4a07.jpg">
</div>

## 📋 ERD Diagram



## 📝 Technologies & Tools (BE) 📝
